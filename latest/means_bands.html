<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Computing Means and Bands · DSGE.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="../versions.js"></script></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="DSGE.jl logo"/></a><h1>DSGE.jl</h1><form class="search" action="search.html"><select id="version-selector" onChange="window.location.href=this.value"><option value="#" selected="selected" disabled="disabled">Version</option></select><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="model_design.html">Model Design</a></li><li><a class="toctext" href="running_existing_model.html">Running An Existing Model</a></li><li><a class="toctext" href="advanced_usage.html">Advanced Usage</a></li><li><a class="toctext" href="input_data.html">Input Data</a></li><li><a class="toctext" href="frbny_data.html">FRBNY Model Input Data</a></li><li><a class="toctext" href="implementation_details.html">Implementation Details</a></li><li><a class="toctext" href="solving.html">Solving the Model</a></li><li><a class="toctext" href="estimation.html">Estimating the Model</a></li><li><a class="toctext" href="forecast.html">Forecasting</a></li><li class="current"><a class="toctext" href="means_bands.html">Computing Means and Bands</a><ul class="internal"><li><a class="toctext" href="#Procedure-1">Procedure</a></li><li><a class="toctext" href="#The-MeansBands-Type-1">The <code>MeansBands</code> Type</a></li></ul></li><li><a class="toctext" href="algorithms.html">Algorithms</a></li><li><a class="toctext" href="contributing.html">Contributing to DSGE.jl</a></li><li><a class="toctext" href="MatlabToJuliaTransition.html">MATLAB to Julia Transition: Estimation</a></li><li><a class="toctext" href="julia_forecasting.html">MATLAB to Julia Transition: Forecast</a></li><li><a class="toctext" href="license.html">License</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="means_bands.html">Computing Means and Bands</a></li></ul><a class="edit-page" href="https://github.com/FRBNY-DSGE/DSGE.jl/tree/2816c6b7d7f3693989bde24f3edcc016ad97be57/docs/src/means_bands.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Computing-Means-and-Bands-1" href="#Computing-Means-and-Bands-1">Computing Means and Bands</a></h1><h2><a class="nav-anchor" id="Procedure-1" href="#Procedure-1">Procedure</a></h2><p>After running a full-distribution forecast, we are often interested in finding means and density bands of the various forecast outputs. This will allow us to plot our estimation of the full distribution of the forecast outputs.</p><p><strong>Main Steps:</strong></p><ul><li><em>Load data:</em> Load and transform data, population data, and population forecast   (required for forecast output transformations)</li></ul><ul><li><em>Read in forecast outputs:</em> Read in the outputs saved by   <a href="forecast.html#DSGE.forecast_one"><code>forecast_one</code></a>, one variable (e.g. one observable) and one   <code>output_type</code> at a time.</li></ul><ul><li><em>Transform forecast outputs:</em> If necessary, use <code>reverse_transform</code> to apply   transformations specified in the <code>Observable</code> or <code>PseudoObservable</code> type to   the given forecast output series.</li></ul><ul><li><em>Compute means and bands:</em> Compute the means and density bands of the forecast   output.</li></ul><ul><li><em>Write to file:</em> For each <code>output_var</code>, Write a <code>MeansBands</code> object (see   <a href="@ref the-meansbands-type">The MeansBands Type</a> below) to the file specified by   <code>get_meansbands_output_files(m)</code>.</li></ul><p>Computing means and bands is done by calling <code>means_bands_all</code>. If desired, you can also write your computed means and bands as matrices by calling <code>meansbands_matrix_all</code>.</p><p>For example, to compute means and bands for an unconditional, full-distribution forecast of states and observables:</p><pre><code class="language-julia">m = AnSchorfheide()
means_bands_all(m, :mode, :none, [:forecaststates, forecastobs])</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DSGE.means_bands_all" href="#DSGE.means_bands_all"><code>DSGE.means_bands_all</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">means_bands_all(m, input_type, cond_type, output_vars; forecast_string = &quot;&quot;,
    density_bands = [0.5, 0.6, 0.7, 0.8, 0.9], minimize = false, verbose = :low)

means_bands_all(input_type, cond_type, output_vars, input_dir, output_dir,
    filestring_base; forecast_string = &quot;&quot;, density_bands = [0.5, 0.6, 0.7, 0.8, 0.9],
    minimize = false, population_mnemonic = Nullable{Symbol}(),
    population_data_file = &quot;&quot;, population_forecast_file = &quot;&quot;,
    y0_indexes = Dict{Symbol, Int}(), data = Matrix{T}(),
    verbose = :low)</code></pre><p>Computes means and bands for pseudo-observables, observables, and shocks, and writes the results to a file. Two methods are provided. The method that accepts a model object as an argument uses the model&#39;s settings to infer the arguments to the second method. Users can optionally skip construction of a model object and manually enter the directory and file names.</p><p>Below, <code>T&lt;:AbstractFloat</code>:</p><p><strong>Input Arguments</strong></p><ul><li><code>m::AbstractModel</code>: model object</li><li><code>input_type::Symbol</code>: see <code>forecast_one</code></li><li><code>cond_type::Symbol</code>: see <code>forecast_one</code></li><li><code>output_vars::Vector{Symbol}</code>: see <code>forecast_one</code></li></ul><p><strong>Method 2 only:</strong></p><ul><li><code>input_dir::AbstractString</code>: directory from which the forecast outputs are to   be read in</li><li><code>output_dir::AbstractString</code>: directory to which the means and bands are to be   saved</li><li><code>filestring_base::Vector{ASCIIString}</code>: should be equivalent to the result of   <code>filestring_base(m)</code></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>forecast_string::AbstractString</code>: forecast identifier string (the value   &quot;fcid=value&quot; in the forecast output filename). Required when   <code>input_type == :subset</code></li></ul><ul><li><code>density_bands::Vector{T}</code>: a vector of percent values (between 0 and 1) for   which to compute density bands</li></ul><ul><li><code>minimize::Bool</code>: if <code>true</code>, choose shortest interval, otherwise just chop off   lowest and highest (percent/2)</li></ul><ul><li><code>verbose</code>: level of error messages to be printed to screen. One of <code>:none</code>,   <code>:low</code>, <code>:high</code></li></ul><p><strong>Method 2 only:</strong></p><ul><li><code>population_mnemonic::Nullable{Symbol}</code>: the result of    <code>get_setting(m, :population_mnemonic</code>. Typically <code>Nullable(:CNP16OV__FRED)</code>.</li></ul><ul><li><code>population_data_file::AbstractString</code>: path to population data (in levels)   file. In the first method, the following file is used, if it exists:   <code>inpath(m, &quot;data&quot;, &quot;population_data_levels_(data_vintage(m)).csv&quot;)</code></li></ul><ul><li><code>population_forecast_file::S</code>: path to population forecast (in levels)   file. In the first method, if <code>use_population_forecast(m)</code>, the following file   is used, if it exists:   <code>inpath(m, &quot;data&quot;, &quot;population_forecast_(data_vintage(m)).csv&quot;)</code></li></ul><ul><li><code>y0_indexes::Dict{Symbol, Int}</code>: A <code>Dict</code> storing the mapping of products to   the index of the first period of data needed to compute the product&#39;s   transformation. This is used to compute growth rates and four-quarter   cumulations (among others). See <code>get_y0_index</code>.</li></ul><ul><li><code>data::Matrix{T}</code>: pre-loaded <code>nobs x nperiods</code> matrix containing the   (untransformed) data matrix.</li></ul></div></section><h2><a class="nav-anchor" id="The-MeansBands-Type-1" href="#The-MeansBands-Type-1">The <code>MeansBands</code> Type</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DSGE.MeansBands" href="#DSGE.MeansBands"><code>DSGE.MeansBands</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">type MeansBands</code></pre><p>Stores the means and bands of results for a particular set of outputs from the forecast step.</p><p>Specifically, forecasts can be made for any element in the Cartesian product of 4 sets:</p><ol><li><code>input_type</code>: some subset of the parameter draws from the estimation    step. See <code>forecast_one</code> for all possible options.</li></ol><ol><li><code>cond_type</code>: conditional type. See <code>forecast_one</code> for all possible options.</li></ol><ol><li><em>product</em>: a particular result computed in the forecast. This could be one of    the following:</li></ol><pre><code class="language-none">  - `hist`: smoothed histories
  - `forecast`: forecasted values
  - `shockdec`: shock decompositions
  - `irf`: impulse responses</code></pre><ol><li>variable <em>class</em>: the category in which a particular variable, like <code>:y_t</code>,    falls. Options are:</li></ol><pre><code class="language-none">  - `state`: state (from `m.endogenous_states` or `m.endogenous_states_augmented`)
  - `obs`: observable (from `m.observables`)
  - `pseudo`: pseudoobservable (from `pseudo_measurement` equation)
  - `shock`: shock (from `m.exogenous_shocks`)</code></pre><p>Note that the Cartesian product (product x class) is the set of options for <code>output_vars</code> in the <code>forecast_one</code> function signature.</p><p><strong>Fields</strong></p><ul><li><code>metadata::Dict{Symbol,Any}</code>: Contains metadata keeping track of the   <code>input_type</code>, <code>cond_type</code>, product (history, forecast, shockdec,   etc), and variable class (observable, pseudoobservable, state, etc)   stored in this <code>MeansBands</code> structure.</li><li><code>means::DataFrame</code>: a <code>DataFrame</code> of the mean of the time series</li><li><code>bands::Dict{Symbol,DataFrame}</code>: a <code>Dict</code> mapping variable names to   <code>DataFrame</code>s containing confidence bands for each variable. See   <code>find_density_bands</code> for more information.</li></ul></div></section><footer><hr/><a class="previous" href="forecast.html"><span class="direction">Previous</span><span class="title">Forecasting</span></a><a class="next" href="algorithms.html"><span class="direction">Next</span><span class="title">Algorithms</span></a></footer></article></body></html>
